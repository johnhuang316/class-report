<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸»æ—¥å­¸é€±å ±åˆ—è¡¨</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="favicon.ico">
</head>
<body>
    <div class="container">
        <div class="header-image">
            <!-- Emoji as placeholder for an image -->
            <span style="font-size: 80px;">âœï¸ğŸ“–ğŸ™ğŸ‘§ğŸ‘¦</span>
        </div>
        <h1>âœ¨ ä¸»æ—¥å­¸é€±å ±åˆ—è¡¨ âœ¨</h1>
        <p class="intro-text">é»æ“Šä¸‹æ–¹å¡ç‰‡æŸ¥çœ‹é€±å ±å…§å®¹ï¼Œè¨˜éŒ„å­©å­å€‘çš„ä¿¡ä»°å­¸ç¿’å’Œéˆå‘½æˆé•·ï¼</p>
        
        <div class="reports-list">
            <h2><span class="cute-icon">ğŸ“š</span> æ‰€æœ‰é€±å ±</h2>
            <div id="reports-list" class="reports-grid">
                <div class="loading">è¼‰å…¥é€±å ±ä¸­... ğŸ”„</div>
            </div>
            <div id="more-reports" class="more-reports" style="display: none;">
                <p>é‚„æœ‰æ›´å¤šé€±å ±...</p>
            </div>
        </div>
    </div>

    <script>
        // ç•¶é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            // ç²å–å ±å‘Šåˆ—è¡¨å®¹å™¨
            const reportsContainer = document.getElementById('reports-list');
            const moreReportsElement = document.getElementById('more-reports');
            
            // å¾ API ç²å–å ±å‘Šåˆ—è¡¨
            fetch('https://class-report-182610284250.us-central1.run.app/api/reports')
                .then(response => response.json())
                .then(data => {
                    // æ¸…ç©ºè¼‰å…¥ä¸­çš„æç¤º
                    reportsContainer.innerHTML = '';
                    
                    // å¦‚æœæ²’æœ‰å ±å‘Šï¼Œé¡¯ç¤ºæç¤º
                    if (!data.reports || data.reports.length === 0) {
                        reportsContainer.innerHTML = '<div class="no-reports">ç›®å‰é‚„æ²’æœ‰é€±å ± ğŸ’«</div>';
                        return;
                    }
                    
                    // å®šç¾©å¯æ„›çš„åœ–ç¤ºé™£åˆ—
                    const icons = ['ğŸ“–', 'ğŸŒˆ', 'âœ¨', 'ğŸ€', 'ğŸ§¸', 'ğŸŒŸ', 'ğŸµ', 'ğŸ™', 'ğŸ’•', 'ğŸ¦„', 'ğŸˆ', 'ğŸŒ»'];
                    
                    // Only show first 12 reports
                    const reportsToShow = data.reports.slice(0, 12);
                    
                    // Iterate over reports and create cards
                    reportsToShow.forEach((report, index) => {
                        // Randomly select an icon
                        const randomIcon = icons[Math.floor(Math.random() * icons.length)];
                        
                        // Create report card
                        const card = document.createElement('div');
                        card.className = 'report-card';
                        card.innerHTML = `
                            <a href="/reports/${report.name}" class="report-item" target="_blank">
                                <div class="report-date">${report.name}</div>
                                <div class="report-icon">${randomIcon}</div>
                            </a>
                        `;
                        
                        // Add to container
                        reportsContainer.appendChild(card);
                    });
                    
                    // If there are more than 12 reports, show "More Reports" prompt
                    if (data.reports.length > 12) {
                        moreReportsElement.style.display = 'block';
                        moreReportsElement.querySelector('p').textContent = `é‚„æœ‰ ${data.reports.length - 12} ä»½æ›´æ—©çš„é€±å ±...`;
                    }
                })
                .catch(error => {
                    console.error('ç²å–å ±å‘Šåˆ—è¡¨å¤±æ•—:', error);
                    reportsContainer.innerHTML = '<div class="no-reports">ç„¡æ³•è¼‰å…¥é€±å ±åˆ—è¡¨ ğŸ˜¢</div>';
                });
        });
    </script>
</body>
</html>
